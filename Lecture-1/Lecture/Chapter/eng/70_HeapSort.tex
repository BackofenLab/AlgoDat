\subsection{HeapSort}

\begin{frame}{HeapSort - Algorithm 1 / 10}
  \textbf{Heapsort:}
  \begin{itemize}
    \item
      The principle stays the same
    \item
      Better structure for finding the smallest element
  \end{itemize}
  \textbf{Binary heap:}
  \begin{itemize}
    \item
      Preferably a complete binary tree
    \item
      \textbf{Heap property:} Each child is smaller / larger than the parent
      element
  \end{itemize}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{HeapSort - Algorithm 2 / 10}
  \textbf{Min heap:}
  \begin{itemize}
    \item
      \textbf{Heap property:} Each child is {\color{Mittel-Blau}smaller}
      (larger) than the parent element
  \end{itemize}
  \begin{columns}
    \begin{column}{0.45\textwidth}
      \begin{figure}[!h]
        \begin{minipage}{\textwidth}
          \input{Lecture/Images/MinHeap_Valid.tikz}
        \end{minipage}
        \caption{Valid min heap}
        \label{fig:minheap_valid}
      \end{figure}
    \end{column}%
    \hspace*{0.1em}%
    \begin{column}{0.45\textwidth}
      \begin{figure}[!h]
        \begin{minipage}{\textwidth}
          \input{Lecture/Images/MinHeap_Invalid.tikz}
        \end{minipage}
        \caption{Invalid min heap}
        \label{fig:minheap_invalid}
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{HeapSort - Algorithm 3 / 10}
  \textbf{How to save the heap?}\\[0.25em]
  \begin{itemize}
    \item
      We number all nodes from top to bottom and left to right starting at
      {\color{Mittel-Blau}0}
      \begin{itemize}
        \item
          The children of node {\color{Mittel-Blau}$i$} are
          {\color{Mittel-Blau}$2i + 1$} and {\color{Mittel-Blau}$2i + 2$}
        \vspace*{0.5em}
        \item
          The parent node of {\color{Mittel-Blau}$i$} is
          {\color{Mittel-Blau}$\mathrm{floor}\left(\frac{i-1}{2}\right)$}
      \end{itemize}
  \end{itemize}%
  \vspace*{-1.5em}%
  \begin{columns}%
    \begin{column}{0.5\textwidth}
      \begin{figure}[!h]%
        \begin{minipage}{\textwidth}%
          \input{Lecture/Images/MinHeap_Numbered.tikz}%
        \end{minipage}%
        \vspace*{-0.5em}%
        \caption{Min heap}%
        \label{fig:minheap_numbered}%
      \end{figure}%
    \end{column}
    \begin{column}{0.5\textwidth}
      \begin{table}[!h]
        \caption{Elements stored in array}
        \label{tab:minheap_numbered}
        \begin{minipage}{12.97em}
          \begin{tabularx}{\textwidth}{ccccccc}
            {\color{Mittel-Gruen}0}&
            {\color{Mittel-Gruen}1}&
            {\color{Mittel-Gruen}2}&
            {\color{Mittel-Gruen}3}&
            {\color{Mittel-Gruen}4}&
            {\color{Mittel-Gruen}5}&
            {\color{Mittel-Gruen}6}\\
            \hline
            \multicolumn{1}{|c}{4}&%
            \multicolumn{1}{|c}{8}&%
            \multicolumn{1}{|c}{5}&%
            \multicolumn{1}{|c}{17}&%
            \multicolumn{1}{|c}{9}&%
            \multicolumn{1}{|c}{11}&%
            \multicolumn{1}{|c|}{7}\\
            \hline
          \end{tabularx}
        \end{minipage}
      \end{table}
    \end{column}
  \end{columns}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{HeapSort - Algorithm 4 / 10}
  \textbf{Taking the smallest element:}
  \begin{itemize}
    \item
      Remove he smallest element (root node)
    \item
      Replace the root with the last node
    \item
      {\color{Mittel-Blau}Sift} the root node until the
      {\color{Mittel-Blau}heap property} is statisfied
  \end{itemize}
  \begin{figure}[!h]%
    \begin{columns}%
      \begin{column}{0.3\textwidth}%
        \begin{minipage}{\textwidth}%
          \input{Lecture/Images/MinHeap_Repair_First.tikz}%
        \end{minipage}%
      \end{column}%
      \hspace*{0.05em}%
      \begin{column}{0.3\textwidth}%
        \begin{minipage}{\textwidth}%
          \input{Lecture/Images/MinHeap_Repair_Second.tikz}%
        \end{minipage}
      \end{column}%
      \hspace*{0.05em}%
      \begin{column}{0.3\textwidth}%
        \begin{minipage}{\textwidth}%
          \input{Lecture/Images/MinHeap_Repair_Third.tikz}%
        \end{minipage}%
      \end{column}%
    \end{columns}%
    \caption{Repair of a min heap}%
    \label{fig:minheap_repair}%
  \end{figure}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{HeapSort - Algorithm 5 / 10}
  \textbf{HeapSort:}
  \begin{itemize}
    \item
      Organize the {\color{Mittel-Blau}$n$} elements as heap
    \item
      While the heap contains more elements
      \begin{itemize}
        \item
          Take the smallest element
        \item
          Move the last node to the root
        \item
          Repair the heap like previously described
      \end{itemize}
    \item
      Output: {\color{Mittel-Gruen}4}, {\color{Mittel-Gruen}5},
      {\color{Mittel-Gruen}\ldots}
  \end{itemize}
  \vspace*{-0.5em}
  \begin{center}
    \begin{figure}[!h]%
      \begin{columns}%
        \begin{column}{0.33\textwidth}%
          \begin{minipage}{\textwidth}%
            \begin{center}%
              \input{Lecture/Images/HeapSort_First.tikz}%
            \end{center}%
          \end{minipage}%
        \end{column}%
        \begin{column}{0.33\textwidth}%
          \begin{minipage}{\textwidth}%
            \begin{center}%
              \input{Lecture/Images/HeapSort_Second.tikz}%
            \end{center}%
          \end{minipage}%
        \end{column}%
        \begin{column}{0.33\textwidth}%
          \begin{minipage}{\textwidth}%
            \begin{center}%
              \input{Lecture/Images/HeapSort_Third.tikz}%
            \end{center}%
          \end{minipage}%
        \end{column}%
      \end{columns}%
      \caption{One iteration of HeapSort}%
      \label{fig:heapsort_repair}%
    \end{figure}
  \end{center}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{HeapSort - Algorithm 6 / 10}
  \textbf{Creation of a heap:}
  \begin{itemize}
    \item
      This operation is called {\color{Mittel-Blau}heapify}
    \item
      The {\color{Mittel-Blau}$n$} elements are already in the containing array
    \item
      Interpret this field als binary heap with currently without the
      {\color{Mittel-Blau}heap property}
    \item
      We repair the heap from bottom up with {\color{Mittel-Blau}sift}
  \end{itemize}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{HeapSort - Algorithm 7 / 10}
  \vspace{-1.0em}
  \begin{table}[!h]%
    \caption{Input in array}%
    \label{tab:heapify_numbers}%
    \begin{minipage}{12.41em}
      \begin{tabularx}{\textwidth}{ccccccc}
        {\color{Mittel-Gruen}0}&
        {\color{Mittel-Gruen}1}&
        {\color{Mittel-Gruen}2}&
        {\color{Mittel-Gruen}3}&
        {\color{Mittel-Gruen}4}&
        {\color{Mittel-Gruen}5}&
        {\color{Mittel-Gruen}6}\\
        \hline
        \multicolumn{1}{|c}{11}&%
        \multicolumn{1}{|c}{7}&%
        \multicolumn{1}{|c}{8}&%
        \multicolumn{1}{|c}{3}&%
        \multicolumn{1}{|c}{2}&%
        \multicolumn{1}{|c}{5}&%
        \multicolumn{1}{|c|}{4}\\
        \hline
      \end{tabularx}
    \end{minipage}
  \end{table}
  \vspace*{-0.5em}
  \begin{center}
    \begin{figure}[!h]%
      \begin{columns}%
        \begin{column}{0.425\textwidth}%
          \begin{minipage}{\textwidth}%
            \begin{center}%
              \input{Lecture/Images/Heapify_First.tikz}%
            \end{center}%
          \end{minipage}%
        \end{column}%
        \begin{column}{0.425\textwidth}%
          \begin{minipage}{\textwidth}%
            \begin{center}%
              \input{Lecture/Images/Heapify_Second.tikz}%
            \end{center}%
          \end{minipage}%
        \end{column}%
      \end{columns}%
      \caption{Heapify lower layer}%
      \label{fig:heapify_lower}%
    \end{figure}
  \end{center}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{HeapSort - Algorithm 8 / 10}
  \begin{center}
   \begin{figure}[!h]%
     \begin{columns}%
       \begin{column}{0.425\textwidth}%
         \begin{minipage}{\textwidth}%
           \begin{center}%
             \input{Lecture/Images/Heapify_Third.tikz}%
            \end{center}%
          \end{minipage}%
        \end{column}%
        \begin{column}{0.425\textwidth}%
          \begin{minipage}{\textwidth}%
            \begin{center}%
              \input{Lecture/Images/Heapify_Fourth.tikz}%
            \end{center}%
          \end{minipage}%
        \end{column}%
      \end{columns}%
      \caption{Heapify upper layer}%
      \label{fig:heapify_upper}%
    \end{figure}
  \end{center}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{HeapSort - Algorithm 9 / 10}
  \begin{center}
    \begin{figure}[!h]
      \begin{center}%
        \begin{minipage}{0.425\textwidth}%
          \input{Lecture/Images/Heapify_Fifth.tikz}%
        \end{minipage}%
      \end{center}%
      \caption{Resulting heap}%
      \label{fig:heapify_upper_final}%
    \end{figure}
  \end{center}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{HeapSort - Algorithm 10 / 10}
  \textbf{Finding the minimum:}
  \begin{itemize}
    \item
      \textbf{MinSort:} Iterate through all non-sorted elements
    \item
      \textbf{HeapSort:} Take the root of the heap
  \end{itemize}
  \vspace*{1.5em}
  \textbf{Removing the minimum in HeapSort:}
  \begin{itemize}
    \item
      Repair the heap and restore the {\color{Mittel-Blau}heap property}
      \begin{itemize}
        \item
          We don't have to repair the whole heap
      \end{itemize}
    \item
      More of this in the next lecture
  \end{itemize}
\end{frame}