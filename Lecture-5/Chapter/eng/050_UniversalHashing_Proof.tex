\subsection{Proof}

\begin{frame}{Universal Hashing}{Proof}
  \textbf{Given:}
  \begin{itemize}
    \item
      We pick two random keys {\color{Mittel-Blau}$x, y \in \mathbb{U} \mid x \neq y$} and
      a random hash function {\color{Mittel-Blau}$h \in \mathbb{H}$}
    \item
      We know the probability of a collision:
      {\color{Mittel-Blau}\[P(h(x) = h(y)) \leq \frac{c}{m}\]}
  \end{itemize}
  \textbf{To proof:}
  {\color{Mittel-Blau}\[E\left[\vert \mathbb{S}_i \vert\right]
     \leq 1 + c \cdot \frac{\vert \mathbb{S} \vert}{m}
     \hspace*{1.5em} \forall \, i\]}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Universal Hashing}{Proof}
  \textbf{We know:}
  {\color{Mittel-Blau}\[\mathbb{S}_i = \{x \in \mathbb{S}: h(x) = i\}\]}
  We define an indicator variable:
  {\color{Mittel-Blau}
  \begin{displaymath}
    I_y = \begin{cases}
      1, & \text{if } h(y) = i\\
      0, & \text{else}
    \end{cases} \hspace*{1.5em} y \in \mathbb{S} \setminus \{x\}
  \end{displaymath}
  \begin{align*}
    \Rightarrow && \vert \mathbb{S}_i \vert
      & = 1 + \sum_{y \in \mathbb{S} \setminus x} I_y\\
    \Rightarrow && E\left[\vert \mathbb{S}_i \vert\right]
      & = E\left[1 + \sum_{y \in \mathbb{S} \setminus x} I_y\right]
        = 1 + \sum_{y \in \mathbb{S} \setminus x} E[I_y]
  \end{align*}}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Universal Hashing}{Proof}
  \textbf{Expected value for same bucket:}
  {\color{Mittel-Blau}
  \begin{align*}
    \left.\begin{array}{rl}
      E[I_y] & = P(I_y = 1)\\
      {} & = P(h(y) = i)\\
      {} & = P(h(y) = h(x))\\
    \end{array}\right\rbrace
    \leq \frac{c}{m}
  \end{align*}}
  \textbf{Final proof:}
  {\color{Mittel-Blau}
  \begin{displaymath}
    1 + \sum_{y \in \mathbb{S} \setminus x} E[I_y]
    \leq
    \underbrace{
      1 + \sum_{y \in \mathbb{S} \setminus x} \frac{c}{m}
        = 1 + \left(\vert \mathbb{S} - 1 \vert \right) \cdot \frac{c}{m}
    }_{
      \displaystyle \leq 1 + \vert \mathbb{S} \vert \cdot \frac{c}{m}
        = 1 + c \cdot \frac{\vert \mathbb{S} \vert}{m}
    }
  \end{displaymath}
  \begin{displaymath}
    \hspace*{7.5em}
    E\left[\vert \mathbb{S}_i \vert\right]
      = 1 + \sum_{y \in \mathbb{S} \setminus \{x\}}
      \leq 1 + c \cdot \frac{\vert \mathbb{S} \vert}{m}
    \hspace*{7.5em}\square
  \end{displaymath}}
\end{frame}
