\toclesssection{Runtime analysis}

\subsection{Minsort}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  How many operations does \textit{Minsort} need?
  \begin{itemize}
    \item<1- |handout:1>
      \textbf{Abstraction 2:} we calculate the upper (lower) bound,
      rather than exactly counting the number of operations\\[0.5em]
      \textbf{Reason}: runtime is approximated by number of basic operations,
      but we can still infer:
      \begin{itemize}
        \item {\color{MainBLight}Upper bound}
        \item {\color{MainBLight}Lower bound}
      \end{itemize}
      \vspace{1em}
    \item<2- |handout:1>
      \textbf{Basic Assumption:}
      \begin{itemize}
        \item
          {\color{MainA}$n$} is size of the input data (i.e. array)
        \item
          {\color{MainA}$T(n)$} number of operations for input
          {\color{MainA}$n$}
      \end{itemize}
  \end{itemize}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  How many operations does \textit{Minsort} need?
  \begin{itemize}
    \item<1- |handout:1>
      \textbf{Observation:}
      the number of operations depends only on the size
      {\color{MainA}$n$} of the array and not on the content!
    \item<2- |handout:1>
      \textbf{Claim:} there are constants {\color{MainA}$C_1$}
      and {\color{MainA}$C_2$} such that:
      \begin{displaymath}
        \textcolor{MainA}{C_1 \cdot n^2 \leq T(n) \leq C_2 \cdot n^2}
      \end{displaymath}%
    \item<3- |handout:1>
      This is called \enquote{quadratic runtime} (due to {\color{MainA}$n^2$})
  \end{itemize}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime Example}
  \begin{overlayarea}{\textwidth}{\textheight}
    \includegraphics<1|handout:0>[width=\linewidth]
      {Images/Runtime/lower-upper-Tn-o1.pdf}%
    \includegraphics<2|handout:0>[width=\linewidth]
      {Images/Runtime/lower-upper-Tn-o2.pdf}%
    \includegraphics<3|handout:1>[width=\linewidth]
      {Images/Runtime/lower-upper-Tn-o3.pdf}%
  \end{overlayarea}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  \textbf{We declare:}
  \begin{itemize}
    \item Runtime of operations: $T(n)$
    \item Number of Elements: $n$
    \item Constants: $C_1$ ({\color{MainBLight}lower bound}),
      $C_2$ ({\color{MainBLight}upper bound})
    \begin{center}
      $C_{1} \cdot n^2
      \leq T(n)
      \leq C_{2} \cdot n^2$
    \end{center}
    \item Number of operations in round $i$: $T_i$
  \end{itemize}
  \begin{figure}[!h]
    \begin{adjustbox}{width=0.5\linewidth}
      \input{Images/MinSort/MinSort_Compact.tikz}%
    \end{adjustbox}%
    \caption{\textit{Minsort} at iteration $i = 4$.
      We have to check $n - 3$ elements}%
    \label{fig:minsort_def}%
  \end{figure}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  \begin{columns}
    \begin{column}{0.55\textwidth}
      \begin{figure}[!h]%
        \begin{adjustbox}{width=\linewidth}%
          \input{Images/MinSort/MinSort_Brace.tikz}%
        \end{adjustbox}%
        \caption{\textit{Minsort}
          \only<1 |handout:0>{with start data}%
          \only<2- |handout:1>{at iteration}
          \only<2 |handout:0>{$i = 1$}%
          \only<3 |handout:0>{$i = 2$}%
          \only<4 |handout:0>{$i = 3$}%
          \only<5 |handout:1>{$i = 4$}%
          \only<6 |handout:0>{$i$}%
          }%
        \label{fig:minsort_brace}%
      \end{figure}
    \end{column}
    \begin{column}{0.40\textwidth}
      Runtime for each iteration:
      \begin{align*}
        \only<2- |handout:1>{T_1 \leq &~ C'_2 \cdot (n-0)}\\
        \only<3- |handout:1>{T_2 \leq &~ C'_2 \cdot (n-1)}\\
        \only<4- |handout:1>{T_3 \leq &~ C'_2 \cdot (n-2)}\\
        \only<5- |handout:1>{T_4 \leq &~ C'_2 \cdot (n-3)}\\
        \only<6- |handout:1>{{}  \vdots~ &~ {} }\\
        \only<6- |handout:1>{T_{n-1}  \leq &~ C'_2 \cdot 2}\\
        \only<6- |handout:1>{T_n  \leq &~ C'_2 \cdot 1}
      \end{align*}
    \end{column}
  \end{columns}
  \onslide<7 |handout:1>{\begin{displaymath}
    T(n)
    = \left(T_1 + \cdots + T_n\right)
    \leq \sum \limits^n_{i=1} \left(C'_2 \cdot i\right)
  \end{displaymath}}
\end{frame}

%-------------------------------------------------------------------------------

%\codeslide{python}{
%\begin{frame}{Runtime analysis - Minsort}
%  \textbf{Alternative: Analyse the Code:}
%  \lstinputlisting[
%    language=Python,
%    style={python-idle-code},
%    basicstyle=\small,
%    tabsize=4,
%    emph={minsort},
%    emphstyle=\color{blue},
%    escapechar={@}
%  ]{Code/MinSort/MinSort.py}
%\end{frame}
%}

%-------------------------------------------------------------------------------

%\codeslide{java}{
%\begin{frame}{Runtime analysis - Minsort}
%  \textbf{Alternative: Analyse the Code:}
%  \lstinputlisting[
%    language=Java,
%    style={java-eclipse-code},
%    basicstyle=\small,
%    tabsize=4,
%    emph={minSort},
%    emphstyle=\color{blue}
%  ]{Code/MinSort/MinSort.java}
%\end{frame}
%}

%-------------------------------------------------------------------------------

%\codeslide{cpp}{
%\begin{frame}{Runtime analysis - Minsort}
%\textbf{Alternative: Analyse the Code:}
%  \lstinputlisting[
%    language=C++,
%    style={cpp-eclipse-code},
%    basicstyle=\small,
%    tabsize=4,
%    morekeywords={size_t},
%    emph={min_sort},
%    emphstyle=\color{blue}
%  ]{Code/MinSort/MinSort.cpp}
%\end{frame}
%}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  %  \textbf{Alternative: Analyse the Code:}\\
  \includegraphics<1 |handout:0>[width=1.1\textwidth]%
    {Images/CodeAnalysis/minsort-code-analysis-o1.pdf}
  \includegraphics<2 |handout:0>[width=1.1\textwidth]%
    {Images/CodeAnalysis/minsort-code-analysis-o2.pdf}
  \includegraphics<3 |handout:0>[width=1.1\textwidth]%
    {Images/CodeAnalysis/minsort-code-analysis-o3.pdf}
  \includegraphics<4- |handout:1>[width=1.1\textwidth]%
    {Images/CodeAnalysis/minsort-code-analysis-o4.pdf}
  \begin{displaymath}
    \textcolor{MainA}{
      \onslide<5- |handout:1>{
        T(n) \leq \sum^{n-2}_{i=0}
        \sum\limits^{\textcolor{SecA}{n-1}}_{\textcolor{SecA}{j=i+1}} C'_2
      }
      \onslide<6- |handout:1>{
        = \sum^{\textcolor{MainB}{n-2}}_{\textcolor{MainB}{i=0}}
        \textcolor{SecA}{(n-i-1)} \cdot C'_2
      }
      \onslide<7- |handout:1>{
        = \sum^{\textcolor{MainB}{n-1}}_{\textcolor{MainB}{i=1}}
        (n-i)\cdot C'_2
      }
      \onslide<8- |handout:1>{
        \ \textcolor{SecB}{\leq}\ 
        \sum^{\textcolor{SecB}{n}}_{i=1} i\cdot C'_2
      }
    }
  \end{displaymath}
  \vspace{-2em}
  \onslide<9- |handout:1>{
    \textbf{Remark}:
    $C'_2$ is cost of comparison $\Rightarrow$ assumed constant
  }
  \vspace{2em}
\end{frame}


%-------------------------------------------------------------------------------

%\begin{frame}{Runtime analysis - Minsort}
%  \begin{center}
%    \begin{math}
%      \begin{array}{l}
%        \displaystyle
%        \max T(n) = \underbrace{
%          \sum^{n - 2}_{i = 0}
%          \left(
%            \hspace*{1.5em}
%            \overbrace{
%              C_\text{s}
%              \vphantom{
%                \sum^{n - 1}_{j = i + 1}
%              }
%            }^\text{swap}
%            \hspace*{1.5em} +
%            \underbrace{
%              \overbrace{
%                \hspace*{0.5em}
%                \sum^{n - 1}_{j = i + 1} C_\text{c}
%                \hspace*{0.5em}
%              }^\text{compare}
%            }_{
%            \lstinline[
%              language=Python,
%              style={python-idle-code},
%              basicstyle=\small
%              ]|range(i+1, len(elements))|
%            }
%            \hspace*{0.5em}
%          \right)
%        }_{
%        \lstinline[
%          language=Python,
%          style={python-idle-code},
%          basicstyle=\small
%        ]|range(0, len(elements)-1)|
%      }\\[5em]
%      \displaystyle\hspace*{2.5em}
%        = \sum^{n - 2}_{i = 0} \left(C_\text{s} + (n - i) C_\text{c}\right)\\
%      \displaystyle\hspace*{2.5em}
%        = \color{MainA}
%        \sum^{n - 1}_{i = 1} \left(C_\text{s} + (n - i + 1) C_\text{c}\right)
%      \end{array}
%    \end{math}
%  \end{center}
%\end{frame}

%-------------------------------------------------------------------------------

%\begin{frame}{Runtime analysis - Minsort}
%  \begin{center}
%    \begin{math}
%      T(n) \leq
%      \left\lbrace
%      \begin{array}{l}
%      \displaystyle\hspace*{1.5em}\color{MainA}
%        \sum^{n - 1}_{i = 1} \left(C_\text{s} + (n - i + 1) C_\text{c}\right)\\
%      \displaystyle\hspace*{1.5em}
%        = \sum^{n - 1}_{i = 1} \left(C_\text{s} + C_\text{c}\right)
%        + \sum^{n - 1}_{i = 1} \left(n - i\right) C_\text{c}\\
%      \displaystyle\hspace{1.5em}
%        = \left(n - 1\right) \cdot \left(C_\text{s} + C_\text{c}\right)
%        + C_\text{c} \sum_{i = 1}^{n - 1} i\\
%     % \displaystyle\hspace*{1.5em}
%     %   \leq n \left(C_\text{s} + C_\text{c}\right) + C_\text{c} \sum^n_{i=1} i
%      \end{array}
%      \right.
%    \end{math}
%  \end{center}
%\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  \textbf{Proof of {\color{MainBLight}upper bound}:
    $T(n) \leq C_2 \cdot n^2$}
  \begin{eqnarray*}
    T(n) & \leq & \sum\limits^{n}_{i=1} C'_2\cdot i\\
    \onslide<2- |handout:1>{
      & = & C'_2 \cdot
      \only<2 |handout:0>{\sum\limits^{n}_{i=1} i}
      \only<3- |handout:1>{\textcolor{MainA}{\sum\limits^{n}_{i=1} i}}
    }\\
    \onslide<3- |handout:1>{
      & & \hspace{1cm}
      \textcolor{MainA}{
        \Downarrow\hspace{0.5cm}
        \rlap{\text{Small Gauss sum}}
      }
    }\\
    \onslide<3- |handout:1>{
      & = & C'_2 \cdot \textcolor{MainA}{\frac{n(n + 1)}{2}}
    }\\
    \onslide<4- |handout:1>{
      & \leq & C'_2 \cdot \frac{n(n + n)}{2}, \ 1 \leq n
    }\\
    \onslide<5- |handout:1>{
      & = & C'_2 \cdot \frac{2 \cdot n^2}{2}
    }
    \onslide<6- |handout:1>{
      \quad = \quad C'_2 \cdot n^2
    }
  \end{eqnarray*}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}<1 |handout:0>{Excursion - Small Gauss Formula}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  \textbf{Proof of {\color{MainBLight}lower bound}:
    $C_1 \cdot n^2 \leq T(n)$}\\[0.5em]
  \hspace{1.5em}Like for the upper bound there exists a {\color{MainA}$C_1$}.
    Summation\\
  \hspace{1.5em}analysis is the same\onslide<4- |handout:1>{,
    \textcolor{MainA}{only final approximation differs}}
  \begin{eqnarray*}
    T(n) & \geq & \sum\limits^{n-1}_{i=1} C'_1 \cdot (n - i)
    \onslide<2- |handout:1>{
      \ =\  C'_1 \sum\limits^{n-1}_{i=1} i
    }\\
    \onslide<3- |handout:1>{
      & \geq & C'_1 \cdot \dfrac{
        \only<3-4|handout:0>{(n - 1)}
        \only<5- |handout:1>{\textcolor{MainA}{(n - 1)}}
        \cdot n}{2}
    }
    \onslide<4- |handout:1>{
      \hspace{1.5em}\text{\color{MainA}How do we get to $n^2$?}
    }\\
    \onslide<5- |handout:1>{
      & & \hspace{1cm}
        \textcolor{MainA}{
          \Downarrow\hspace{0.5cm}
          \rlap{$n - 1 \geq \dfrac{n}{2}$ for $n \geq 2$}
        }
    }\\
    \onslide<6- |handout:1>{
      & \geq & C'_1 \cdot
      \dfrac{\textcolor{MainA}{n} \cdot n}{\textcolor{MainA}{2} \cdot 2}
    }
    \onslide<7- |handout:1>{
      \ = \ \dfrac{C'_1}{4} \cdot n^2
    }
  \end{eqnarray*}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  \textbf{Runtime Analysis:}
  \begin{itemize}
    \item<1- |handout:1>
      {\color{MainB}Upper bound}:
      \hspace{1.5em} $T(n) \leq C'_2 \cdot n^2$
    \item<2- |handout:1>
      {\color{MainB}Lower bound}:
      \hspace{1.5em} $\dfrac{C'_1}{4} \cdot n^2 \leq T(n)$
  \end{itemize}
  \onslide<3- |handout:1>{\begin{block}{Summarized:}
    \begin{displaymath}
      \frac{C'_1}{4} \cdot n^2 \leq T(n) \leq C'_2 \cdot n^2
    \end{displaymath}
    \textbf{Quadratic runtime proven:}
    \begin{displaymath}
      C_1 \cdot n^2 \leq T(n) \leq C_2 \cdot n^2
    \end{displaymath}
  \end{block}}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime Example}
  \begin{itemize}
    \item<1- |handout:1>
      The runtime is growing quadratically with the number of elements
      ${\color{MainA}n}$ in the list
    \item<2- |handout:1>
      With constants $\color{MainA}C_1$ and $\color{MainA}C_2$
      for which $\color{MainA}C_1 \cdot n^2 \leq T(n) \leq C_2 \cdot n^2$
    \item<3- |handout:1>
      $3\, \times$ elements $\Rightarrow$ $9\, \times$ runtime
      \begin{itemize}
        \item<4- |handout:1>
          $C = \SI{1}{\nano\second}$
          (1 simple instruction $\approx \SI{1}{\nano\second}$)
        \item<5- |handout:1>
          $n = 10^6$ (1 million numbers = $\SI{4}{\mega\byte}$
          with $\SI{4}{\byte\per number}$)
          \begin{itemize}
            \item
              $C \cdot n^2 = \SI{e-9}{\second} \cdot 10^{12}
              = \SI{e3}{\second} = \SI{16.7}{\minute}$
          \end{itemize}
        \item<6- |handout:1>
          $n = 10^9$ (1 billion numbers = $\SI{4}{\giga\byte}$)
          \begin{itemize}
            \item
              $C \cdot n^2 = \SI{e-9}{\second} \cdot 10^{18}
              = \SI{e9}{\second} = 31.7$~years
          \end{itemize}
      \end{itemize}
    \item<7- |handout:1>
      \textbf{Quadratic runtime = \enquote{big} problems unsolvable}
  \end{itemize}
\end{frame}
