\toclesssection{Runtime analysis}

\subsection{Minsort}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  How many operations does \textit{Minsort} need?
  \begin{itemize}
    \item
      \textbf{Abstraction 2:} We calculate the upper (lower) bound,
      rather than counting the operations exactly\\[0.5em]
      \textbf{Reason}: Runtime is unknown, but we know:
      \begin{itemize}
        \item {\color{MainBLight}Upper bound}
        \item {\color{MainBLight}Lower bound}
      \end{itemize}
      \vspace{1em}
    \item
      \textbf{Basic Setting:}
      \begin{itemize}
        \item
          {\color{MainA}$n$} is size of input (i.e. array)
        \item
          {\color{MainA}$T(n)$} number of operations for input
          {\color{MainA}$n$}
      \end{itemize}
  \end{itemize}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  How many operations does \textit{Minsort} need?
  \begin{itemize}
    \item
      \textbf{Observation:}
      The number of operations needed is only depending on the size
      {\color{MainA}$n$} of the array and not on the content!
    \item
      \textbf{Claim:} There are constants {\color{MainA}$C_1$}
      and {\color{MainA}$C_2$} such that:
      \begin{displaymath}
        \textcolor{MainA}{C_1 \cdot n^2 \leq T(n) \leq C_2 \cdot n^2}
      \end{displaymath}%
    \item
      This is called \enquote{quadratic runtime} (due to {\color{MainA}$n^2$})
  \end{itemize}
\end{frame}

%-------------------------------------------------------------------------------

%TODO: Add figures

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  \textbf{We declare:}
  \begin{itemize}
    \item Runtime of opertations: $T(n)$
    \item Number of Elements: $n$
    \item Constants: $C_1$ ({\color{MainBLight}lower bound}),
      $C_2$ ({\color{MainBLight}upper bound})
    \begin{center}
      $C_{1} \cdot n^2
      \leq T(n)
      \leq C_{2} \cdot n^2$
    \end{center}
    \item Number of operations in round $i$: $T_i$
  \end{itemize}
  \begin{figure}[!h]
    \begin{adjustbox}{width=0.5\linewidth}
      \input{Images/MinSort/MinSort_Compact.tikz}%
    \end{adjustbox}%
    \caption{\textit{Minsort} at the iteration $i = 4$.
      We have to check $n - 3$ elements}%
    \label{fig:minsort_def}%
  \end{figure}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  \begin{columns}
    \begin{column}{0.55\textwidth}
      \begin{figure}[!h]%
        \begin{adjustbox}{width=\linewidth}%
          \input{Images/MinSort/MinSort_Brace.tikz}%
        \end{adjustbox}%
        \caption{\textit{Minsort}
          \only<1 |handout:0>{with start data}%
          \only<2- |handout:1>{at iteration}
          \only<2 |handout:0>{$i = 1$}%
          \only<3 |handout:0>{$i = 2$}%
          \only<4 |handout:0>{$i = 3$}%
          \only<5 |handout:1>{$i = 4$}%
          \only<6 |handout:0>{$i$}%
          }%
        \label{fig:minsort_brace}%
      \end{figure}
    \end{column}
    \begin{column}{0.40\textwidth}
      Compares at each iteration:
      \begin{align*}
        \only<2- |handout:1>{T_1 \leq &~ C'_2 \cdot (n-0)}\\
        \only<3- |handout:1>{T_2 \leq &~ C'_2 \cdot (n-1)}\\
        \only<4- |handout:1>{T_3 \leq &~ C'_2 \cdot (n-2)}\\
        \only<5- |handout:1>{T_4 \leq &~ C'_2 \cdot (n-3)}\\
        \only<6- |handout:1>{{}  \vdots~ &~ {} }\\
        \only<6- |handout:1>{T_{n-1}  \leq &~ C'_2 \cdot 2}\\
        \only<6- |handout:1>{T_n  \leq &~ C'_2 \cdot 1}
      \end{align*}
    \end{column}
  \end{columns}
  \onslide<7 |handout:1>{\begin{displaymath}
    T(n)
    = C \cdot \left(T_1 + \cdots + T_n\right)
    \leq C \cdot \sum \limits^n_{i=1} i
  \end{displaymath}}
\end{frame}

%-------------------------------------------------------------------------------

\codeslide{python}{
\begin{frame}{Runtime analysis - Minsort}
  \textbf{Alternative: Analyse the Code:}
%  \input{Images/MinSort/MinSort_Code_Highlight.tikz}
%  \lstinputlisting[
%    language=Python,
%    style={python-idle-code},
%    basicstyle=\small,
%    tabsize=4,
%    emph={minsort},
%    emphstyle=\color{blue},
%    escapechar={@}
%  ]{Code/MinSort/MinSort.py}
\end{frame}
}

%-------------------------------------------------------------------------------

\codeslide{java}{
\begin{frame}{Runtime analysis - Minsort}
  \textbf{Alternative: Analyse the Code:}
  \lstinputlisting[
    language=Java,
    style={java-eclipse-code},
    basicstyle=\small,
    tabsize=4,
    emph={minSort},
    emphstyle=\color{blue}
  ]{Code/MinSort/MinSort.java}
\end{frame}
}

%-------------------------------------------------------------------------------

\codeslide{cpp}{
\begin{frame}{Runtime analysis - Minsort}
\textbf{Alternative: Analyse the Code:}
  \lstinputlisting[
    language=C++,
    style={cpp-eclipse-code},
    basicstyle=\small,
    tabsize=4,
    morekeywords={size_t},
    emph={min_sort},
    emphstyle=\color{blue}
  ]{Code/MinSort/MinSort.cpp}
\end{frame}
}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  \begin{center}
    \begin{math}
      \begin{array}{l}
        \displaystyle
        \max T(n) = \underbrace{
          \sum^{n - 2}_{i = 0}
          \left(
            \hspace*{1.5em}
            \overbrace{
              C_\text{s}
              \vphantom{
                \sum^{n - 1}_{j = i + 1}
              }
            }^\text{swap}
            \hspace*{1.5em} +
            \underbrace{
              \overbrace{
                \hspace*{0.5em}
                \sum^{n - 1}_{j = i + 1} C_\text{c}
                \hspace*{0.5em}
              }^\text{compare}
            }_{
            \lstinline[
              language=Python,
              style={python-idle-code},
              basicstyle=\small
              ]|range(i+1, len(elements))|
            }
            \hspace*{0.5em}
          \right)
        }_{
        \lstinline[
          language=Python,
          style={python-idle-code},
          basicstyle=\small
        ]|range(0, len(elements)-1)|
      }\\[5em]
      \displaystyle\hspace*{2.5em}
        = \sum^{n - 2}_{i = 0} \left(C_\text{s} + (n - i) C_\text{c}\right)\\
      \displaystyle\hspace*{2.5em}
        = \color{Mittel-Blau}
        \sum^{n - 1}_{i = 1} \left(C_\text{s} + (n - i + 1) C_\text{c}\right)
      \end{array}
    \end{math}
  \end{center}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  \begin{center}
    \begin{math}
      T(n) \leq
      \left\lbrace
      \begin{array}{l}
      \displaystyle\hspace*{1.5em}\color{Mittel-Blau}
        \sum^{n - 1}_{i = 1} \left(C_\text{s} + (n - i + 1) C_\text{c}\right)\\
      \displaystyle\hspace*{1.5em}
        = \sum^{n - 1}_{i = 1} \left(C_\text{s} + C_\text{c}\right)
        + \sum^{n - 1}_{i = 1} \left(n - i\right) C_\text{c}\\
      \displaystyle\hspace{1.5em}
        = \left(n - 1\right) \cdot \left(C_\text{s} + C_\text{c}\right)
        + C_\text{c} \sum_{i = 1}^{n - 1} i\\
     % \displaystyle\hspace*{1.5em}
     %   \leq n \left(C_\text{s} + C_\text{c}\right) + C_\text{c} \sum^n_{i=1} i
      \end{array}
      \right.
    \end{math}
  \end{center}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  \begin{block}{Proof of the statement ({\color{Mittel-Gruen}upper bound}):}
    We assume: Swap, Compare $\in \mathcal{O}(1)$\\
    $\hspace{1.5em}\Rightarrow C_\text{s} = C_\text{c} = 1$
    \vspace*{0.5em}
    \begin{center}
      $\displaystyle
      T(n)
      \;\leq\;
        2 n \, + \, \underbrace{
          \sum \limits^{n - 1}_{i = 1} i
          \,=\, \frac{n^2 - n}{2}
        }_\text{Small Gauss sum}
        \, + \,2  n
      \;\leq\; \frac{n^2 + 3 n}{2}
      \;\leq\; \frac{n^2 + n^2}{2}
      \;\leq\; \frac{2 n^2}{2}
      \,=\, n^2
      $
    \end{center}
    $\Rightarrow T(n) \leq C_2 \cdot n^2, \, C_2 = 1$
  \end{block}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  \begin{block}{Proof of $C_1 \cdot n^2 \leq T(n)$
      ({\color{Mittel-Gruen}lower bound}):}
    We assume: Compare $\in \mathcal{O}(1)$\\
    $\hspace{1.5em}\Rightarrow C_\text{c} = 1, \; C_\text{s} = 0$\\
    \vspace*{0.5em}
    Analogous for the {\color{Mittel-Gruen}lower bound}
    (no value is swapped), there exists a $C_1$, for that
    applys:\\[0.5em]
    \begin{centering}
      \begin{math}
        \begin{array}{@{}rcl@{}}
          T(n) & \geq &
          \displaystyle
          n - 1 + \sum^{n - 1}_{i=1} i
          = \frac{n^2 - n}{2} + n - 1
          = \frac{n^2 + n}{2} - 1
        \end{array}
      \end{math}
    \end{centering}
  \end{block}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime analysis - Minsort}
  \begin{block}{Proof of $C_1 \cdot n^2 \leq T(n)$:}
    \vspace*{0.5em}
    \begin{center}
      $\displaystyle
        T(n) \; \geq \;
          = \frac{n^2 + n}{2} - 1
      $\\
    \end{center}
    $T(n)$ is always bigger than / equal to $\frac{1}{2} \cdot n^2$
    for $n \geq 2$:\\[1.0em]
    $\hspace*{1.5em}\Rightarrow T(n) \geq C_1 \cdot n^2$
  \end{block}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime Example}
  \begin{itemize}
    \item
      The runtime is growing quadratic with the number of elements
      ${\color{Mittel-Blau}n}$ in the list.\\
    \item
      $2\, \times$ elements $\Rightarrow$ $4\, \times$ runtime\\
      \begin{itemize}
        \item
          $C = \SI{1}{\nano\second}$
          (1 simple instruction $\approx \SI{1}{\nano\second}$)
        \item
          $n = 10^6$ (1 million numbers = $\SI{4}{\mega\byte}$
          with $\SI{4}{\byte\per number}$)
          \begin{itemize}
            \item
              $C \cdot n^2 = \SI{e-9}{\second} \cdot 10^{12}
              = \SI{e3}{\second} = \SI{16.7}{\minute}$
          \end{itemize}
        \item
          $n = 10^9$ (1 billion numbers = $\SI{4}{\giga\byte}$)
          \begin{itemize}
            \item
              $C \cdot n^2 = \SI{e-9}{\second} \cdot 10^{18}
              = \SI{e9}{\second} = 31.7$~years
          \end{itemize}
      \end{itemize}
    \item
      \textbf{Quadratic runtime = \enquote{big} problems unsolvable}
  \end{itemize}
\end{frame}