\section{Runtime Complexity}

\begin{frame}{Runtime Complexity}
  \begin{itemize}
    \item
      The runtime does not entirely depend on the size of the problem, but also
      on the type of input
    \item
      This results in:
    \begin{itemize}
      \item
        {\color{Mittel-Blau}Best runtime:}\\
        Lowest possible runtime complexity for an input of size $n$
      \item
        {\color{Mittel-Blau}Worst runtime:}\\
        Highest possible runtime complexity for an input of size $n$
      \item
        {\color{Mittel-Blau}Average / Expected runtime:}\\
        The average of all runtime complexities for an input of size $n$
    \end{itemize}
  \end{itemize}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime Complexity}{Example 1 - Conditions}
  \begin{itemize}
    \item
      Input: Array $a$ with $n$ elements
      $a[i] \in \mathbb{N}, \; 1 \leq a[i] \leq n, \; 0 \leq i < n$
    \item
      Output: Updated $a$ with $n$ elements where $a[0] \neq 1$
  \end{itemize}
  \begin{tabularx}{\textwidth}{P{11em}O{4em}O{1.75em}O{4.5em}O{1.75em}L}
  if $a[0]\,$ == 1: & $\mathcal{O}(1)$ & {} & {} & {} & {}\\
    \hhline{~*{1}{-}}
    $\hspace*{1.5em}$ $a[0]\,$ = 2 & $\mathcal{O}(1)$ &
    \multirow{-2}{*}{$\left.%
      \begin{array}{@{}c@{}}\\[1em]\end{array}%
      \right\rbrace$} &%
    \multirow{-2}{*}{$\mathcal{O}(1)$} & {} & {}\\
    else: & {} & {} & {} & {} & {}\\
    $\hspace*{1.5em}$ for $\,i\,$ in range(0, n): & $\mathcal{O}(n)$ &
    {} & {} & {} & {}\\
    \hhline{~*{1}{-}}
    $\hspace*{3em}$ $a[i]\,$ = 2 & $\mathcal{O}(1)$ &
    \multirow{-2}{*}{$\left.
      \begin{array}{@{}c@{}}\\[1em]\end{array}
      \right\rbrace$} &
    \multirow{-2}{*}{
      $\begin{array}{@{}c@{}}
      \mathcal{O}(n) \cdot \mathcal{O}(1)\\
      = \mathcal{O}(n)
      \end{array}$
    } &%
    \multirow{-5}{*}{$\left.
      \begin{array}{@{}c@{}}\\[4.5em]\end{array}
      \right\rbrace$} &%
    \hspace*{-0.5em}%
    \multirow{-5}{*}{%
      $\mathcal{O}(?)$
    }%
  \end{tabularx}
  \onslide<2->{\begin{itemize}
    \item
      {\color{Mittel-Blau}Best runtime:}
      $\mathcal{O}(1) + \mathcal{O}(1) = \mathcal{O}(1)$
    \item
      {\color{Mittel-Blau}Worst runtime:}
      $\mathcal{O}(1) + \mathcal{O}(n) = \mathcal{O}(n)$
  \end{itemize}}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime Complexity}{Example 1 - Average Runtime}
  \begin{itemize}
    \item
      The {\color{Mittel-Blau}average runtime} is determined by the average
      runtime for all input instances of size $n$
    \item<2->
      Every element of $a$ can have $n$ different values\\
      \begin{math}
        \hspace{1.5em}\Rightarrow n \cdot \ldots \cdot n = n^n
      \end{math}
      different input instances of size $n$
      \begin{itemize}
        \item<3->
          \lstinline[
            language=Python,
            style={python-idle-code},
            basicstyle=\small
            ]|a[0] == 1|
          in $n^{n-1}$ instances
        \item<4->
          \lstinline[
            language=Python,
            style={python-idle-code},
            basicstyle=\small
          ]|a[0] != 1|
          in $n^n - n^{n-1} = n^{n-1} \cdot (n-1)$ instances
      \end{itemize}
    \item<5->
      Sum of all runtime complexities:
      \begin{displaymath}
        \underbrace{n^{n-1} \cdot \mathcal{O}(1)\vphantom{()}}_{
          \lstinline[
            language=Python,
            style={python-idle-code},
            basicstyle=\small
          ]|a[0] == 1|
        } + \underbrace{n^{n-1} \cdot (n-1) \cdot \mathcal{O}(n)}_{
          \lstinline[
            language=Python,
            style={python-idle-code},
            basicstyle=\small
          ]|a[0] != 1|
        }
      \end{displaymath}
    \item<6->
      {\color{Mittel-Blau}Average runtime}: {\footnotesize (normalize by
      number of instances)}
      \begin{displaymath}
        \frac{n^{n-1} + n^{n-1} \cdot (n-1) \cdot n}{n^n}
        = \frac{1}{n} + n - 1
        \in \mathcal{O}(n)
      \end{displaymath}
  \end{itemize}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime Complexity}{Example 2 - Binary Addition}
  \begin{itemize}
    \item
      Input: binary number $b$ with $n$ digits
    \item
      Output: binary number $b+1$ with $n$ digits
    \item<2->
      Runtime of the algorithm is determined by the number of bits getting
      changed (steps)
      \begin{enumerate}
        \item "0" $\to$ "1"
        \item "1" $\to$ "0"
      \end{enumerate}
    \item<3->
      {\color{Mittel-Blau}Best runtime:}
      $1\,\text{step} = \mathcal{O}(1)$
    \item<3->
      {\color{Mittel-Blau}Worst runtime:}
      $n\,\text{steps} = \mathcal{O}(n)$
  \end{itemize}
  \vspace{-1.0em}%
  \begin{table}[!h]%
    \caption{Binary addition}%
    \label{tab:runtime:binary_addition}%
    \begin{tabular}{crrc}%
      Digits ($n$) & Input & Output & Steps\\
      \midrule
      10 & 1011100100 & 1011100101 & 1\\
      4 & 1011 & 1100 & 3\\
      8 & 11111111 & 00000000 & 8
    \end{tabular}
  \end{table}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime Complexity}{Example 2 - Average Steps}
  \vspace{-3em}
  \begin{columns}
    \begin{column}[t]{0.5\linewidth}
      \begin{table}[!t]%
        \caption{Binary addition with $n=1$}%
        \label{tab:runtime:binary_addition_one}%
        \begin{tabular}{rrc}%
          Input & Output & Steps\\
          \midrule
          0 & 1 & 1\\
          1 & 0 & 1
        \end{tabular}
      \end{table}
    \end{column}
    \begin{column}[t]{0.5\linewidth}
      \onslide<2->
      \begin{table}[!t]%
        \caption{Binary addition with $n=2$}%
        \label{tab:runtime:binary_addition_two}%
        \begin{tabular}{rrc}%
          Input & Output & Steps\\
          \midrule
          00 & 01 & 1\\
          01 & 10 & 2\\
          10 & 11 & 1\\
          11 & 00 & 2
        \end{tabular}
      \end{table}
    \end{column}
  \end{columns}
  \begin{columns}
\onslide<1->   \begin{column}{0.5\linewidth}
      \begin{align*}
        \overline{\text{steps}} &= \frac{1+1}{2} = 1\\[0.5em]
       % {} &= 2 - \frac{1}{1} = {\color{Mittel-Blau}2 - \frac{1}{2^{n-1}}}
      \end{align*}
    \end{column}
    \begin{column}{0.5\linewidth}
\onslide<2->      \begin{align*}
        \overline{\text{steps}} &= \frac{1+2+1+2}{4} = \frac{3}{2}\\[0.5em]
%        {} &= 2 - \frac{1}{2} = {\color{Mittel-Blau}2 - \frac{1}{2^{n-1}}}
      \end{align*}
    \end{column}
  \end{columns}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime Complexity}{Example 2 - Average Steps}
  \vspace{-3em}
  \begin{columns}
    \begin{column}{0.5\linewidth}
      \begin{table}[!h]%
        \caption{Binary addition with $n=3$}%
        \label{tab:runtime:binary_addition_three}%
        \begin{tabular}{rrc}%
          Input & Output & Steps\\
          \midrule
          000 & 001 & 1\\
          001 & 010 & 2\\
          010 & 011 & 1\\
          011 & 100 & 3\\
          \midrule
          100 & 101 & 1\\
          101 & 110 & 2\\
          110 & 111 & 1\\
          111 & 000 & 3
        \end{tabular}
      \end{table}
    \end{column}
    \begin{column}{0.5\linewidth}
      \begin{align*}
        \overline{\text{steps}}
          &= \frac{1+2+1+3+1+2+1+3}{8} = \frac{7}{4}\\[0.5em]
   {} &\onslide<2->{= 2 - \frac{1}{4} = {\color{Mittel-Blau}2 - \frac{1}{2^{n-1}}}}
      \end{align*}\\
\onslide<2->{    
 $\Rightarrow$ {\color{Mittel-Blau}Average runtime}:
      \begin{math}
        \displaystyle\hspace*{1.5em}
        2 - \frac{1}{2^{n-1}} \in \mathcal{O}(1)
        \end{math}}
    \end{column}
  \end{columns}
\end{frame}

%-------------------------------------------------------------------------------



\begin{frame}{Runtime Complexity}{Example 2 - Average Steps}
  \vspace{-2.0em}
  \begin{table}[!h]%
    \caption{Case analysis for instances of size $n$}%
    \label{tab:runtime:binary_addition_case_analysis}%
    \vspace{-0.5em}%
    \begin{tabular}{cccc}
      Input & Output & Instances & Steps\\
      \midrule
      $\_\_\_ \ldots \_\_\_0$ & $\_\_\_ \ldots \_\_\_1$ &
      {\only<2>{\color{red}}$2^{n-1}$} & 1
      \\
      $\_\_\_ \ldots \_\_01$ & $\_\_\_ \ldots \_\_10$ &
      {\only<2>{\color{red}}$2^{n-2}$} & 2
      \\
      $\_\_\_ \ldots \_011$ & $\_\_\_ \ldots \_100$ &
      {\only<2>{\color{red}}$2^{n-3}$} & 3
      \\
      $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$
      \\
      $\_01 \ldots 1111$ & $\_10 \ldots 0000$ & 
      {\only<2>{\color{red}}$2^{1}$} &
      n-1
      \\
      $011 \ldots 1111$ & $100 \ldots 0000$ & 
      {\only<2>{\color{red}}$2^0$} & n
      \\
      $111 \ldots 1111$ & $000 \ldots 0000$ & 
      {\only<2>{\color{red}}1} & n
    \end{tabular}
  \end{table}
  \vspace{-0.5em}
  \onslide<2->{{\color{Mittel-Blau}Average steps:}
  \vspace{-1.0em}
 \begin{displaymath}
    \dfrac{
      {\only<3->{\color{Mittel-Blau}} 
      1 \cdot {\only<2>{\color{red}} 2^{n-1}}
	+ 2 \cdot {\only<2>{\color{red}}2^{n-2}}
	+ \dots 
	+ (n-1) \cdot {\only<2>{\color{red}}2^1} 
	+ n \cdot {\only<2>{\color{red}}2^0}}
	+ n \cdot {\only<2>{\color{red}}1}
	}{{\only<3->{\color{blue}}2^{n-1}+2^{n-2}+\dots+2^{1}+2^{0}}+1} = \onslide<3->{\frac{
      {\color{Mittel-Blau}\left(\sum\limits_{i=1}^n i \cdot
      2^{n-i}\right)} + n }{
      {\color{blue}\left(\sum\limits_{i=0}^{n-1} 2^i\right)} + 1
    }}
  \end{displaymath}}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime Complexity}{Example 2 - Average Steps}
  \begin{itemize}
    \item
      Denominator:
      \begin{displaymath}
        \left(\sum_{i=0}^{n-1} 2^i \right) + 1
        \stackrel{\begin{array}{c}
          \text{geometric}\\
          \text{series}
        \end{array}}{=}
        (2^n - 1) + 1 = 2^n
      \end{displaymath}
    \item \onslide<2->{
      Counter:}
  \end{itemize}
  \begin{alignat*}{4}
    & \onslide<2->{\left(\sum_{i=1}^n i \cdot 2^{n-i}\right) + n}
     \onslide<3->{\stackrel{\color{Mittel-Blau}[x = {\color{red}2x} - x]}{=}
        {\color{red}\left(2 \, \sum_{i=1}^n i \cdot 2^{n-i}\right)}
        {\color{Mittel-Blau}- \left(\sum_{i=1}^n i \cdot 2^{n-i}\right)} + n}\\
    &\onslide<4->{\hspace*{1.5em} = {\color{red}1 \cdot 2^n + 2 \cdot 2^{n-1} +
    3 \cdot n^{n-2} + \dots + (n-1) \cdot 2^2 + n \cdot 2^1}}\\
    & \onslide<4->{\hspace{4.5em}{\color{Mittel-Blau}- 1 \cdot 2^{n-1} - 2 \cdot
    2^{n-2} - \dots - (n-2) \cdot 2^2 - (n-1) \cdot 2^1 - n \cdot 2^0} + n}\\
    & \onslide<5->{\hspace*{1.5em} = \underbrace{{\color{red}2^n + 2^{n-1} +
    \dots +2^1} {\color{blue}+ 2^0}}_{2^{n+1}-1}{\color{blue} - 2^0}
      = 2^{n+1} - 2}
  \end{alignat*}
\end{frame}

%-------------------------------------------------------------------------------

\begin{frame}{Runtime Complexity}{Example 2 - Average Steps}
  {\color{Mittel-Blau}Average steps}:
  \begin{displaymath}
    \overline{steps}
    = \frac{
      \left(\sum\limits_{i=1}^n i \cdot 2^{n-i}\right) + n
    }{\left(\sum\limits_{i=0}^{n-1} 2^i \right) + 1}
    = \frac{2^{n+1} - 2}{2^n}
    = {\color{Mittel-Blau}2 - \frac{1}{2^{n-1}}}
  \end{displaymath}
  \begin{displaymath}
    \lim_{n \to \infty} \left(2 - \frac{1}{2^{n-1}}\right) = 2
    \in \mathcal{O}(1)
  \end{displaymath}
\end{frame}

